<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
      xmlns:f="http://xmlns.jcp.org/jsf/core"
      xmlns:h="http://xmlns.jcp.org/jsf/html"
      xmlns:p="http://primefaces.org/ui"
      xmlns:c="http://xmlns.jcp.org/jsp/jstl/core"
      xmlns:t="http://back.rolsac2.caib.es/tags">
<ui:composition template="/WEB-INF/templates/layoutDialog.xhtml">
    <ui:define name="metadata">
        <f:metadata>
            <f:viewParam id="MODO_ACCESO" name="MODO_ACCESO" value="#{dialogSeleccionarTemaMultiple.modoAcceso}" />
            <f:viewParam id="ID" name="ID" value="#{dialogSeleccionarTemaMultiple.id}" />
            <f:viewAction action="#{dialogSeleccionarTemaMultiple.load}" />
        </f:metadata>
    </ui:define>

    <ui:define name="pageTitleDialog">
        #{labels['dialogSeleccionarTemaMultiple.titulo']} - #{dialogSeleccionarTemaMultiple.temaPadre.descripcion.getTraduccion(dialogSeleccionarTemaMultiple.idioma)}
    </ui:define>

    <ui:define name="icerik">
        <script>
            window.onload = function(){
                let elementos = document.getElementsByClassName("cabeceraIdiomas");
                if(elementos != null  &amp;&amp; elementos[0] != null){
                    elementos[0].classList.add("hide");
                }

                let elements = document.getElementsByClassName("etElemento");

                let seleccionar = function() {
                    seleccion();
                };

                for (let i = 0; i &lt; elements.length; i++) {
                    elements[i].addEventListener('dblclick', seleccionar, false);
                }

                let seleccionado =  document.getElementsByClassName("ui-treenode-leaf");

                if("#{dialogSeleccionarTema.selectedNode}"!=null &amp;&amp; seleccionado.length!=0){
                    let seleccionado = document.getElementsByClassName("ui-treenode-leaf");
                    seleccionado[0].classList.add("ui-treenode-parent");
                }

                setEstilos();
            }

            function seleccion(){
                let elements = document.getElementsByClassName("etElemento");

                let seleccionar = function() {
                    document.getElementById('formDialog:seleccionar').click();
                };

                for (let i = 0; i &lt; elements.length; i++) {
                    elements[i].addEventListener('dblclick', seleccionar, false);
                }

                setEstilos();
            }

            function setEstilos(){
                let elementos = document.getElementsByClassName("ui-treenode-leaf");
                for(let i=0; i&lt;elementos.length; i++){
                    elementos[i].classList.add("ui-treenode-parent");
                }
            }

            //function addLeaf(el){
            //el.classList.add("ui-treenode-leaf");
            //}
        </script>
        <style>
            .ui-treenode-parent{
                margin-top:.5rem !important;
            }

            .ui-state-highlight{
                background-color: #e3f2fd !important;
                background-image: none !important;
                border: 2px #a6d5fa solid !important;
                outline: none !important;
            }

            .ui-treenode-label{
                color:#495057 !important;
                font-size: 1.2em;
                word-wrap:break-word !important;
                white-space: normal !important;
            }

            .ui-treenode-children{
                padding: 0px 0px 0px 1rem !important;
            }

            .hide{
                display:none;
            }
        </style>
    </ui:define>

    <ui:define name="contentDialog">
        <p:growl id="messagesDialog"
                 globalOnly="false"
                 showDetail="true"
                 life="5000"
                 process="@all"
                 escape="false"/>
        <div class="container ">
            <p:tree value="#{dialogSeleccionarTemaMultiple.root}" var="node"
                    selectionMode="checkbox" styleClass="panel-tree w100"
                    selection="#{dialogSeleccionarTemaMultiple.temasSeleccionados}"
                    >
                <p:treeNode type="default" >
                    <!--<h:outputText value="#{node.nombre.getTraduccion(sessionBean.lang)}"/>-->
                    <h:outputText value="#{node.identificador}"/>
                </p:treeNode>
            </p:tree>
        </div>

    </ui:define>

    <ui:define name="contentFooterDialogLeft">
        <p:commandButton  action="#{dialogSeleccionarTemaMultiple.ayuda}"
                          icon="pi pi-info-circle" iconPos="top"
                          value="#{labels['dict.ayuda']}"
                          process="@this" />
    </ui:define>

    <ui:define name="contentFooterDialogRight">
        <p:commandButton action="#{dialogSeleccionarTemaMultiple.guardar}"
                         value="#{labels['dict.seleccionar']}" update="messagesDialog"
                         rendered="#{!dialogSeleccionarTemaMultiple.isModoConsulta()}"
                         process="@all" id="seleccionar"/>
        <p:commandButton action="#{dialogSeleccionarTemaMultiple.cerrar}"
                         value="#{labels['dict.cerrar']}"
                         process="@this" />

    </ui:define>

</ui:composition>
</html>