<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
      xmlns:f="http://xmlns.jcp.org/jsf/core"
      xmlns:h="http://xmlns.jcp.org/jsf/html"
      xmlns:p="http://primefaces.org/ui"
      xmlns:my="http://java.sun.com/jsf/composite/components"
>
<ui:composition template="/WEB-INF/templates/layoutDialog.xhtml">
    <ui:define name="metadata">
        <f:metadata>
            <f:viewParam id="MODO_ACCESO" name="MODO_ACCESO" value="#{dialogUnidadAdministrativa.modoAcceso}"/>
            <f:viewParam id="ID" name="ID" value="#{dialogUnidadAdministrativa.id}"/>
            <f:viewAction action="#{dialogUnidadAdministrativa.load}"/>
        </f:metadata>
    </ui:define>
    <ui:define name="pageTitleDialog">
        <h:outputFormat value="#{labels['dialogUnidadAdministrativa.detalle']} "
                        rendered="#{!dialogUnidadAdministrativa.isModoAlta()}"/>
        <h:outputFormat value="#{labels['dialogUnidadAdministrativa.nuevo']} "
                        rendered="#{dialogUnidadAdministrativa.isModoAlta()}"/>
    </ui:define>
    <ui:define name="contentIdioma">

        <span class="pi pi-tag mt-1"/>
        <h:outputText value="#{labels['dict.idioma']}:" style="margin-right:4px;margin-top:5px;"/>
        <p:selectOneButton id="opcionIdioma" value="#{dialogUnidadAdministrativa.idioma}"
                           styleClass="botoneraRed"
                           disabled="#{dialogEntidad.isModoConsulta()}" maxlength="50">
            <f:selectItems value="#{sessionBean.getIdiomasPermitidosList()}" var="idioma"
                           itemValue="#{idioma}" itemLabel="#{labels['idiomas.' += idioma]}"/>
            <p:ajax process="@this" update="formDialog:txtNombre formDialog:txtUrl formDialog:txtPresentacion formDialog:txtResponsable"/>
        </p:selectOneButton>
        <p:commandButton action="#{dialogUnidadAdministrativa.traducir}"
                         icon="pi pi-compass" iconPos="top"
                         value="#{labels['dict.traducir']}"
                         style="margin-left:10px"
                         update="messagesDialog "
                         process="@this"/>
    </ui:define>
    <ui:define name="contentDialog">
        <p:growl id="messagesDialog"
                 globalOnly="false"
                 showDetail="false"
                 life="5000"
                 escape="false"/>

        <div class="row" style="margin-right: 0px;">
            <div class="ui-g-12 ui-md-9 pl-4 panel-container">
                <p:panel header="#{labels['dialogUnidadAdministrativa.datos']}" id="formDatos">
                    <div class="form-row">
                        <div class="form-group col-md-3">
                            <p class="mb-1">
                                <h:outputText styleClass="mr-2 mb-1" value="#{labels['dict.codigo']}:" for="txtCodigo"/>
                            </p>
                            <p:inputText id="txtCodigo" value="#{dialogUnidadAdministrativa.data.codigo}"
                                         styleClass="w95" disabled="true"/>
                        </div>
                        <div class="form-group col-md-3">
                            <p class="mb-1">
                                <h:outputText styleClass="mr-2 mb-1"
                                              value="#{labels['dialogUnidadAdministrativa.codigo.dir3']}:"
                                              for="txtCodigoDIR3"/>
                            </p>
                            <p:inputText id="txtCodigoDIR3" value="#{dialogUnidadAdministrativa.data.codigoDIR3}"
                                         styleClass="w95" disabled="#{dialogUnidadAdministrativa.isModoConsulta()}"/>
                        </div>
                        <div class="form-group col-md-2">
                           <p:outputLabel value="#{labels['dialogUnidadAdministrativa.orden']}:" for="txtOrden"
                                           styleClass="mb-1 pt-0"/>
                            <p>
                                <p:inputNumber id="txtOrden" value="#{dialogUnidadAdministrativa.data.orden}"
                                               styleClass="w55" required="true"
                                               requiredMessage="#{labels['dict.obligatorio.orden']}"
                                               disabled="#{dialogUnidadAdministrativa.isModoConsulta()}"
                                               decimalPlaces="0"/>
                            </p>
                        </div>
                        <div class="form-group col-md-4">
                            <p:outputLabel value="#{labels['dict.identificador']}:" for="txtIdentificador"
                                           styleClass="mb-1 pt-0"/>
                            <p:inputText id="txtIdentificador" value="#{dialogUnidadAdministrativa.data.identificador}"
                                         requiredMessage="#{labels['dict.obligatorio.identificador']}"
                                         styleClass="w95" required="true"
                                         disabled="#{dialogUnidadAdministrativa.isModoConsulta()}"/>
                        </div>
                    </div>
                    <div class="form-row">
                        <div class="form-group col-md-6">
                            <p:outputLabel styleClass="mr-2 mb-1 pt-0" value="#{labels['dict.nombre']}:"
                                           for="txtNombre"/>
                            <p>
                                <my:literalComponent id="txtNombre"
                                                     literal="#{dialogUnidadAdministrativa.data.nombre}"
                                                     disabled="#{dialogUnidadAdministrativa.isModoConsulta()}"
                                                     soloLecture="#{dialogUnidadAdministrativa.isModoConsulta()}"
                                                     required="true"
                                                     idiomasObligatorios="#{sessionBean.getIdiomasObligatorios()}"
                                                     idiomasPermitidos="#{sessionBean.getIdiomasPermitidos()}"
                                                     idioma="#{dialogUnidadAdministrativa.idioma}"
                                                     nombreLiteral="#{labels['dict.nombre']}">
                                    <f:validator validatorId="es.caib.rolsac2.back.validators.ValidadorLiteral"  />
                                </my:literalComponent>
                            </p>

                        </div>
                        <div class="form-group col-md-3">
                            <p class="mb-1">
                                <h:outputText styleClass="mr-2 mb-1"
                                              value="#{labels['dialogUnidadAdministrativa.abreviatura']}:"
                                              for="txtAbreviatura"/>
                            </p>
                            <p:inputText id="txtAbreviatura" value="#{dialogUnidadAdministrativa.data.abreviatura}"
                                         styleClass="w95" disabled="#{dialogUnidadAdministrativa.isModoConsulta()}"/>

                        </div>
                        <div class="form-group col-md-3">
                            <p class="mb-1">
                                <h:outputText value="#{labels['dialogUnidadAdministrativa.tipo']}:" for="txtTipo"/>
                            </p>
                            <p:selectOneMenu id="txtTipo" value="#{dialogUnidadAdministrativa.data.tipo}"
                                             styleClass="w95"
                                             disabled="#{dialogUnidadAdministrativa.isModoConsulta()}"
                                             converter="#{tipoUnidadAdministrativaConverter}">
                                <f:selectItem itemLabel="#{labels['dialogUnidadAdministrativa.selecciona.tipo']}"
                                              itemValue="#{null}"/>
                                <f:selectItems value="#{dialogUnidadAdministrativa.tipos}" var="tipo"
                                               itemLabel="#{tipo.identificador}" itemValue="#{tipo}"/>
                            </p:selectOneMenu>
                        </div>
                    </div>
                    <div class="form-row" style="height:auto;">
                        <div class="form-group col-md-4">
                            <p class="mb-1">
                                <h:outputText styleClass="mb-1" value="#{labels['dialogUnidadAdministrativa.url']}:"
                                              for="txtUrl"/>
                            </p>
                            <p>
                                <my:literalComponent id="txtUrl"
                                                     literal="#{dialogUnidadAdministrativa.data.url}"
                                                     idioma="#{dialogUnidadAdministrativa.idioma}"
                                                     idiomasObligatorios="#{sessionBean.getIdiomasObligatorios()}"
                                                     idiomasPermitidos="#{sessionBean.getIdiomasPermitidos()}"
                                                     nombreLiteral="#{labels['dialogUnidadAdministrativa.url']}"
                                                     disabled="#{dialogUnidadAdministrativa.isModoConsulta()}"/>
                            </p>

                        </div>
                        <div class="form-group col-md-8" >
                            <p class="mb-1">
                                <h:outputText styleClass="mr-2 mb-1"
                                              value="#{labels['dialogUnidadAdministrativa.presentacion']}:"
                                              for="txtPresentacion"/>
                            </p>
                            <p>
                                <my:literalComponent id="txtPresentacion"
                                                     literal="#{dialogUnidadAdministrativa.data.presentacion}"
                                                     disabled="#{dialogUnidadAdministrativa.isModoConsulta()}"
                                                     idioma="#{dialogUnidadAdministrativa.idioma}"
                                                     idiomasObligatorios="#{sessionBean.getIdiomasObligatorios()}"
                                                     idiomasPermitidos="#{sessionBean.getIdiomasPermitidos()}"
                                                     tipo="html"
                                                     height="100px"
                                                     width="600px"
                                                     toolbar="true"
                                                     idCompuesto="formDialog\:txtPresentacion"
                                                     nombreLiteral="#{labels['dialogUnidadAdministrativa.presentacion']}"/>
                            </p>

                        </div>
                    </div>
                </p:panel>
                <p:panel id="panel-ro" header="#{labels['dialogUnidadAdministrativa.rel.organica']}">
                    <div class="form-row">
                        <div class="form-group col-md-12">
                            <p class="mb-1">
                                <h:outputText styleClass="mb-1" value="#{labels['dialogUnidadAdministrativa.padre']}:"
                                              for="txtPadre"/>
                            </p>
                            <p>
                                <my:unidadAdministrativaComponent id="txtPadre"
                                                                  value="#{dialogUnidadAdministrativa.data.padre}"
                                                                  idioma="#{dialogUnidadAdministrativa.idioma}"
                                                                  ocultarTexto="false" esCabecera="false"
                                                                  soloLecture="#{dialogUnidadAdministrativa.isModoEdicion() || dialogUnidadAdministrativa.isModoConsulta()}"
                                />
                            </p>

                        </div>
                    </div>
                </p:panel>
                <p:panel id="formResponsable" header="#{labels['dialogUnidadAdministrativa.responsable']}">
                    <div class="form-row">
                        <div class="form-group col-md-8">
                            <p class="mb-1">
                                <h:outputText value="#{labels['dialogUnidadAdministrativa.responsableNombre']}:"
                                              for="txtResponsableNombre"/>
                            </p>
                            <p:inputText id="txtResponsableNombre"
                                         value="#{dialogUnidadAdministrativa.data.responsableNombre}"
                                         styleClass="w95"
                                         disabled="#{dialogUnidadAdministrativa.isModoConsulta()}"/>
                        </div>
                        <div class="form-group col-md-4">
                            <p:outputLabel styleClass=" mb-1 pt-0"
                                           value="#{labels['dialogUnidadAdministrativa.tipoSexo']}:"
                                           for="txtTipoSexo"/>
                            <p:selectOneMenu id="txtTipoSexo"
                                             value="#{dialogUnidadAdministrativa.data.responsableSexo}"
                                             styleClass="w95" required="true"
                                             requiredMessage="#{labels['dict.obligatorio.responsableSexo']}"
                                             disabled="#{dialogUnidadAdministrativa.isModoConsulta()}"
                                             converter="#{tipoSexoConverter}">
                                <f:selectItem
                                        itemLabel="#{labels['dialogUnidadAdministrativa.seleccionado.tipoSexo']}"
                                        itemValue="#{null}"/>
                                <f:selectItems value="#{dialogUnidadAdministrativa.tiposSexo}" var="responsableSexo"
                                               itemLabel="#{responsableSexo.identificador}"
                                               itemValue="#{responsableSexo}"/>
                            </p:selectOneMenu>
                        </div>
                    </div>
                    <div class="form-row"  style="height:auto;">
                        <div class="form-group col-md-4">
                            <p class="mb-1">
                                <h:outputText value="#{labels['dialogUnidadAdministrativa.responsableEmail']}:"
                                              for="txtResponsableEmail"/>
                            </p>
                            <p:inputText id="txtResponsableEmail"
                                         value="#{dialogUnidadAdministrativa.data.responsableEmail}"
                                         styleClass="w95"
                                         disabled="#{dialogUnidadAdministrativa.isModoConsulta()}"/>
                        </div>
                        <div class="form-group col-md-8">
                            <p class="mb-1">
                                <h:outputText value="#{labels['dialogUnidadAdminsitrativa.responsableCV']}:"
                                              for="txtResponsable"/>
                            </p>
                            <p>
                                <my:literalComponent id="txtResponsable"
                                                     literal="#{dialogUnidadAdministrativa.data.responsable}"
                                                     idioma="#{dialogUnidadAdministrativa.idioma}"
                                                     idiomasObligatorios="#{sessionBean.getIdiomasObligatorios()}"
                                                     idiomasPermitidos="#{sessionBean.getIdiomasPermitidos()}"
                                                     tipo="html"
                                                     height="100px"
                                                     width="700px"
                                                     idCompuesto="formDialog\:txtResponsable"
                                                     nombreLiteral="#{labels['dialogUnidadAdminsitrativa.responsableCV']}"/>
                            </p>
                        </div>
                    </div>
                </p:panel>

                <p:panel id="formContacto" header="#{labels['dialogUnidadAdministrativa.contacto']}">
                    <div class="form-row">
                        <div class="form-group col-md-2">
                            <p class="mb-1">
                                <h:outputText value="#{labels['dialogUnidadAdministrativa.telefono']}:"
                                              for="txtTelefono"/>
                            </p>
                            <p:inputText id="txtTelefono" value="#{dialogUnidadAdministrativa.data.telefono}"
                                         styleClass="w95"
                                         disabled="#{dialogUnidadAdministrativa.isModoConsulta()}"/>
                        </div>
                        <div class="form-group col-md-2">
                            <p class="mb-1">
                                <h:outputText value="#{labels['dialogUnidadAdministrativa.fax']}:" for="txtFax"/>
                            </p>
                            <p:inputText id="txtFax" value="#{dialogUnidadAdministrativa.data.fax}" styleClass="w95"
                                         disabled="#{dialogUnidadAdministrativa.isModoConsulta()}"/>
                        </div>
                        <div class="form-group col-md-4">
                            <p class="mb-1">
                                <h:outputText value="#{labels['dialogUnidadAdministrativa.email']}:" for="txtEmail"/>
                            </p>
                            <p:inputText id="txtEmail" value="#{dialogUnidadAdministrativa.data.email}"
                                         styleClass="w95"
                                         disabled="#{dialogUnidadAdministrativa.isModoConsulta()}"/>
                        </div>
                        <div class="form-group col-md-4">
                            <p class="mb-1">
                                <h:outputText value="#{labels['dialogUnidadAdministrativa.dominio']}:"
                                              for="txtDominio"/>
                            </p>
                            <p:inputText id="txtDominio" value="#{dialogUnidadAdministrativa.data.dominio}"
                                         styleClass="w95"
                                         disabled="#{dialogUnidadAdministrativa.isModoConsulta()}"/>
                        </div>
                    </div>
                </p:panel>

            </div>
            <div class="ui-g-12 ui-md-3 pr-1">

                <div class="row left-container mx-0 mb-2">
                    <div class="col-12 left-container-header text-center">
                        <p class="left-container-tit mt-2 mb-1">MATERIAS (MOCK)</p>
                    </div>
                    <div class="col-10 p-1">
                        <p:dataTable id="dataTableMaterias" var="td" value="#{dialogUnidadAdministrativa.materiasSIA}"
                                     emptyMessage="La tabla está vacía" scrollable="true" scrollHeight="120"
                                     paginator="false" selectionMode="single"
                                     selection="#{dialogUnidadAdministrativa.materiaSeleccionada}"
                                     rowKey="#{td.codigo}" styleClass="noHeader">

                            <!-- Necesario para actualizar en controlador la fila seleccionada -->
                            <p:ajax event="rowSelect" global="false"/>
                            <p:ajax event="rowUnselect"/>
                            <p:ajax event="rowDblselect"
                                    oncomplete="rcEditarPropiedad();"
                            />

                            <p:column headerText="DESCRIPCIÓN" styleClass="text-center w75">
                                <h:outputText value="#{td.identificador}"/>
                            </p:column>

                        </p:dataTable>
                    </div>
                    <div class="col-2 p-1 d-flex flex-column align-content-center justify-content-center align-items-center">
                        <p:button title="Nuevo" icon="pi pi-plus" styleClass="text-success"></p:button>
                        <p:button title="Eliminar" icon="pi pi-minus" styleClass="text-danger"></p:button>
                        <p:button title="Consultar" icon="pi pi-eye"></p:button>
                    </div>
                </div>
                <!--<div class="row left-container mx-0 mb-2">
                    <div class="col-12 left-container-header text-center">
                        <p class="left-container-tit mt-2 mb-1">EDIFICIOS (MOCK)</p>
                    </div>
                    <div class="col-10 p-1">
                        <p:dataTable id="dataTableEdificios" var="td" value="#{dialogUnidadAdministrativa.edificios}"
                                     emptyMessage="La tabla está vacía" scrollable="true" scrollHeight="120"
                                     paginator="false" selectionMode="single"
                                     selection="#{dialogUnidadAdministrativa.edificioSeleccionado}"
                                     rowKey="#{td.codigo}" styleClass="noHeader">

                            &lt;!&ndash; Necesario para actualizar en controlador la fila seleccionada &ndash;&gt;
                            <p:ajax event="rowSelect" global="false"/>
                            <p:ajax event="rowUnselect"/>
                            <p:ajax event="rowDblselect"
                                    oncomplete="rcEditarPropiedad();"
                            />

                            &lt;!&ndash;<p:column headerText="CÓDIGO" styleClass="text-center w-25">
                                <h:outputText value="#{td.codigo}"/>
                            </p:column>&ndash;&gt;

                            <p:column headerText="DIRECCIÓN" styleClass="text-center w75">
                                <h:outputText value="#{td.direccion}"/>
                            </p:column>

                        </p:dataTable>
                    </div>
                    <div class="col-2 p-1 d-flex flex-column align-content-center justify-content-center align-items-center">
                        <p:button title="Nuevo" icon="pi pi-plus" styleClass="text-success"></p:button>
                        <p:button title="Eliminar" icon="pi pi-minus" styleClass="text-danger"></p:button>
                        <p:button title="Consultar" icon="pi pi-eye"></p:button>
                    </div>
                </div>-->
               <!-- <div class="row left-container mx-0 mb-2">
                    <div class="col-12 left-container-header text-center">
                        <p class="left-container-tit mt-2 mb-1">SECCIONES (MOCK)</p>
                    </div>
                    <div class="col-10 p-1">
                        <p:dataTable id="dataTableSecciones" var="td" value="#{dialogUnidadAdministrativa.secciones}"
                                     emptyMessage="La tabla está vacía" scrollable="true" scrollHeight="120"
                                     paginator="false" selectionMode="single"
                                     selection="#{dialogUnidadAdministrativa.seccionSeleccionada}"
                                     rowKey="#{td.codigo}" styleClass="noHeader">

                            &lt;!&ndash; Necesario para actualizar en controlador la fila seleccionada &ndash;&gt;
                            <p:ajax event="rowSelect" global="false"/>
                            <p:ajax event="rowUnselect"/>
                            <p:ajax event="rowDblselect"
                                    oncomplete="rcEditarPropiedad();"
                            />

                            &lt;!&ndash;<p:column headerText="CÓDIGO" styleClass="text-center w-25">
                                <h:outputText value="#{td.codigo}"/>
                            </p:column>&ndash;&gt;

                            <p:column headerText="SECCIONES" styleClass="text-center w75">
                                <h:outputText value="#{td.identificador}"/>
                            </p:column>

                        </p:dataTable>
                    </div>
                    <div class="col-2 p-1 d-flex flex-column align-content-center justify-content-center align-items-center">
                        <p:button title="Nuevo" icon="pi pi-plus" styleClass="text-success"></p:button>
                        <p:button title="Eliminar" icon="pi pi-minus" styleClass="text-danger"></p:button>
                        <p:button title="Consultar" icon="pi pi-eye"></p:button>
                    </div>
                </div>-->
                <div class="row left-container mx-0">
                    <div class="col-12 left-container-header text-center">
                        <p class="left-container-tit mt-2 mb-1">#{labels['dialogUnidadAdministrativa.usuarios']}</p>
                    </div>
                    <div class="col-10 p-1">
                        <p:dataTable id="dataTableUsuarios" var="td" value="#{dialogUnidadAdministrativa.data.usuariosUnidadAdministrativa}"
                                     emptyMessage="#{labels['dict.tablaVacia']}" scrollable="true" scrollHeight="120"
                                     paginator="false" selectionMode="single"
                                     selection="#{dialogUnidadAdministrativa.usuarioSeleccionado}"
                                     rowKey="#{td.codigo}" styleClass="noHeader">

                            <!-- Necesario para actualizar en controlador la fila seleccionada -->
                            <p:ajax event="rowSelect" global="false"/>
                            <p:ajax event="rowUnselect"/>


                            <p:column headerText="#{labels['msg.tablaVacia']}" styleClass="text-center w75">
                                <h:outputText value="#{td.identificador}"/>
                            </p:column>

                        </p:dataTable>
                    </div>
                    <div class="col-2 p-1 d-flex flex-column align-content-center justify-content-center align-items-center">
                        <p:commandButton title="#{labels['dict.nuevo']}" icon="pi pi-plus" styleClass="text-success"
                                         process="@this" actionListener="#{dialogUnidadAdministrativa.anyadirUsuarios()}"
                                         rendered="#{!dialogUnidadAdministrativa.isModoConsulta()}">
                            <p:ajax event="dialogReturn"  process="@this"
                                    update="messagesDialog dataTableUsuarios"/>
                        </p:commandButton>
                        <p:commandButton title="#{labels['dict.eliminar']}" icon="pi pi-minus" styleClass="text-danger"
                                         action="#{dialogUnidadAdministrativa.borrarUsuario()}"
                                         process="@this" update="dataTableUsuarios messagesDialog"
                                         rendered="#{!dialogUnidadAdministrativa.isModoConsulta()}"/>
                        <p:commandButton title="#{labels['dict.consultar']}" icon="pi pi-eye"
                                         action="#{dialogUnidadAdministrativa.consultarUsuario()}"
                                         process="@this" update="dataTableUsuarios messagesDialog"/>
                    </div>
                </div>

                <h:outputScript>
                    function rcEditarPropiedad() {
                        document.getElementById("dialogPlugin:btnEditarPropiedad").click();
                    }

                    function rcBorrarPropiedad() {
                        document.getElementById("dialogPlugin:btnEliminarPropiedad").click();
                    }
                </h:outputScript>
            </div>
        </div>


    </ui:define>

    <ui:define name="contentFooterDialogRight">
        <p:commandButton action="#{dialogUnidadAdministrativa.ayuda}"
                         icon="pi pi-info-circle" iconPos="top"
                         value="#{labels['dict.ayuda']}"
                         process="@this"/>
        <p:commandButton action="#{dialogUnidadAdministrativa.guardar}"
                         value="#{labels['dict.guardar']}" update="messagesDialog formDatos panel-ro formResponsable formContacto "
                         rendered="#{!dialogUnidadAdministrativa.isModoConsulta()}"
                         process="@all"/>
        <p:commandButton action="#{dialogUnidadAdministrativa.cerrar}"
                         value="#{labels['dict.cerrar']}" update="messagesDialog"
                         process="@this"/>

    </ui:define>
</ui:composition>
</html>