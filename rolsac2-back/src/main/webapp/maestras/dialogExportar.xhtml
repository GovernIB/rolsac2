<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
      xmlns:f="http://xmlns.jcp.org/jsf/core"
      xmlns:h="http://xmlns.jcp.org/jsf/html"
      xmlns:p="http://primefaces.org/ui"
      xmlns:my="http://java.sun.com/jsf/composite/components"
      xmlns:c="http://xmlns.jcp.org/jsp/jstl/core"
      xmlns:t="http://back.rolsac2.caib.es/tags">

<!--
PÃ gina amb el llistat de personal d'una unitat administrativa.
-->
<ui:composition template="/WEB-INF/templates/layoutDialog.xhtml">
    <ui:define name="metadata">
        <f:metadata>
            <f:viewParam id="MODO_ACCESO" name="MODO_ACCESO" value="#{dialogExportar.modoAcceso}"/>
            <f:viewParam id="ID" name="ID" value="#{dialogExportar.id}"/>
            <f:viewParam id="TIPO" name="TIPO" value="#{dialogExportar.tipo}"/>
            <f:viewAction action="#{dialogExportar.load}"/>
        </f:metadata>
    </ui:define>


    <ui:define name="pageTitleDialog">
        <h:outputFormat value="#{labels['dict.exportar']}" />
    </ui:define>

    <ui:define name="contentIdioma">

    </ui:define>

    <ui:define name="contentDialog">

        <p:importConstants type="es.caib.rolsac2.service.model.types.TypeExportarFormato"
                           var="tipos"></p:importConstants>

        <h:outputStylesheet library="css">
            body {
                overflow: hidden;
            }
        </h:outputStylesheet>
        <p:growl id="messagesDialog"
                 globalOnly="false"
                 showDetail="false"
                 life="5000"
                 escape="false"/>
        <p:panel id="form">
            <div class="row">
                <div class="ui-g-12 ui-md-12 ui-lg-12">
                   <p:outputLabel value="#{labels['dialogExportar.cabecera']}" />
                </div>
            </div>
            <div class="row">
                <div class="ui-g-12 ui-md-3 ui-lg-3">
                   <p:outputLabel value="#{labels['dict.formato']}:" />
                </div>
                <div class="ui-g-12 ui-md-9 ui-lg-9">
                    <p:selectOneButton value="#{dialogExportar.datos.formato}"
                                       styleClass="w95 botoneraRed"  maxlength="50"
                                       converter="#{tipoFormatoConverter}" >
                        <f:selectItems value="#{tipos.values()}" var="tipo"
                                       itemValue="#{tipo}" itemLabel="#{labels['dict.formato.' += tipo]}" />
                    </p:selectOneButton>
                </div>
            </div>
            <c:if test="#{dialogExportar.isProcServ()}">
                <div class="row">
                    <div class="ui-g-12 ui-md-3 ui-lg-3">
                        <p:outputLabel value="#{labels['dict.estados']}:" />
                    </div>
                    <div class="ui-g-12 ui-md-9 ui-lg-9">
                        <p:selectOneButton value="#{dialogExportar.datos.estados}"
                                           converter="javax.faces.Boolean"
                                           styleClass="w95 botoneraRed"  maxlength="50">
                            <f:selectItem itemValue="true" itemLabel="#{labels['dialogExportar.estado.todos']}" />
                            <f:selectItem itemValue="false" itemLabel="#{labels['dialogExportar.estado.soloUno']}" />
                        </p:selectOneButton>
                    </div>
                </div>
            </c:if>
            <div class="row mb-5">
                <div class="ui-g-12 ui-md-3 ui-lg-3">
                    <p:outputLabel value="#{labels['dict.cantidad']}:" />
                </div>
                <div class="ui-g-12 ui-md-9 ui-lg-9">
                    <p:selectOneButton value="#{dialogExportar.datos.todosLosDatos}"
                                       converter="javax.faces.Boolean"
                                       styleClass="w95 botoneraRed"  maxlength="50">
                        <f:selectItem itemValue="true" itemLabel="#{labels['dialogExportar.cantidad.todos']}" />
                        <f:selectItem itemValue="false" itemLabel="#{labels['dialogExportar.cantidad.actual']}" />
                    </p:selectOneButton>
                </div>
            </div>

            <p:dataTable id="datatable" var="td" value="#{dialogExportar.datos.campos}"
                         emptyMessage="#{labels['dict.tablaVacia']}"
                         paginator="false"
                         draggableRows="true">
                <!--<p:ajax event="rowReorder"  />-->
                <p:ajax event="rowReorder" listener="#{dialogExportar.onRowReorder}" update="datatable" />

                <p:column headerText="#{labels['dict.mostrar']}" styleClass="text-center w90px">
                    <p:selectBooleanCheckbox value="#{td.seleccionado}" />
                </p:column>

                <p:column headerText="#{labels['dict.campo']}" styleClass="text-center">
                    <h:outputText value="#{labels['' += td.literal]}" />
                </p:column>

                <p:column headerText="#{labels['dict.nombreCabecera']}" styleClass="text-center">
                    <p:inputText value="#{td.nombreCampo}" styleClass="w96" />
                </p:column>
            </p:dataTable>
        </p:panel>
    </ui:define>

    <ui:define name="contentFooterDialogRight">
        <p:commandButton action="#{dialogExportar.ayuda}"
                         icon="pi pi-info-circle" iconPos="top"
                         value="#{labels['dict.ayuda']}"
                         process="@this"
                         update="messagesDialog"/>
        <p:commandButton action="#{dialogExportar.guardar}"
                         value="#{labels['dict.exportar']}" update="messagesDialog form"
                         process="@all"/>
        <p:commandButton action="#{dialogExportar.cerrar}" update="messagesDialog"
                         value="#{labels['dict.cerrar']}" id="closeButton"
                          />
    </ui:define>

</ui:composition>
</html>
