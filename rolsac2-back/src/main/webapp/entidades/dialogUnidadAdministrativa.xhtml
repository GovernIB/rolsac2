<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
      xmlns:f="http://xmlns.jcp.org/jsf/core"
      xmlns:h="http://xmlns.jcp.org/jsf/html"
      xmlns:p="http://primefaces.org/ui"
      xmlns:my="http://java.sun.com/jsf/composite/components" xmlns:c="http://java.sun.com/jsp/jstl/core"
>
<ui:composition template="/WEB-INF/templates/layoutDialog.xhtml">
    <ui:define name="metadata">
        <f:metadata>
            <f:viewParam id="MODO_ACCESO" name="MODO_ACCESO" value="#{dialogUnidadAdministrativa.modoAcceso}"/>
            <f:viewParam id="ID" name="ID" value="#{dialogUnidadAdministrativa.id}"/>
            <f:viewParam id="MODO_EVOLUCION" name="MODO_EVOLUCION" value="#{dialogUnidadAdministrativa.modoEvolucion}" />
            <f:viewParam id="MODO_EVOLUCION_UAS" name="MODO_EVOLUCION_UAS" value="#{dialogUnidadAdministrativa.modoEvolucionUAs}" />
            <f:viewAction action="#{dialogUnidadAdministrativa.load}"/>
        </f:metadata>
    </ui:define>
    <ui:define name="pageTitleDialog">
        <h:outputFormat value="#{labels['dialogUnidadAdministrativa.detalle']} "
                        rendered="#{!dialogUnidadAdministrativa.isModoAlta()}"/>
        <h:outputFormat value="#{labels['dialogUnidadAdministrativa.nuevo']} "
                        rendered="#{dialogUnidadAdministrativa.isModoAlta()}"/>
    </ui:define>
    <ui:define name="contentIdioma">

        <span class="pi pi-tag mt-1"/>
        <h:outputText value="#{labels['dict.idioma']}:" style="margin-right:4px;margin-top:5px;"/>
        <p:selectOneButton id="opcionIdioma" value="#{dialogUnidadAdministrativa.idioma}"
                           styleClass="botoneraRed" unselectable="false" maxlength="50">
            <f:selectItems value="#{sessionBean.getIdiomasPermitidosList()}" var="idioma"
                           itemValue="#{idioma}" itemLabel="#{labels['idiomas.' += idioma]}"/>
            <p:ajax process="@this"
                    update="formDialog:txtNombre formDialog:txtUrl formDialog:txtPresentacion formDialog:txtResponsable formDialog:txtTipo formDialog:txtTipoSexo"/>
        </p:selectOneButton>
        <p:commandButton action="#{dialogUnidadAdministrativa.traducir}"
                         icon="pi pi-compass" iconPos="top"
                         value="#{labels['dict.traducir']}"
                         style="margin-left:10px"
                         update="messagesDialog "
                         process="@this"
                         rendered="#{!dialogUnidadAdministrativa.isModoConsulta() and dialogUnidadAdministrativa.tradExiste()}">
            <p:ajax event="dialogReturn" listener="#{dialogUnidadAdministrativa.returnDialogTraducir}" process="@this"
                    update="formDialog:txtNombre formDialog:txtUrl formDialog:txtPresentacion formDialog:txtResponsable formDialog:txtTipo formDialog:txtTipoSexo"/>
        </p:commandButton>
    </ui:define>
    <ui:define name="contentDialog">
        <p:growl id="messagesDialog"
                 globalOnly="false"
                 showDetail="false"
                 life="5000"
                 escape="false"/>

        <div class="row" style="margin-right: 0px;">
            <div class="ui-g-12 ui-md-9 pl-4 panel-container">
                <p:panel header="#{labels['dialogUnidadAdministrativa.datosBaja']}" id="formDatosBaja" rendered="#{dialogUnidadAdministrativa.data.isBorrado()}" >
                    <div class="form-row" style="height: 110px">
                        <div class="form-group col-md-4">
                            <p class="mb-1">
                                <p:outputLabel value=" " />
                            </p>
                            <p:outputLabel value="#{labels['dialogUnidadAdministrativa.bajaInfo']}"  styleClass="mt-1 pt-0 iconoRojo" />
                        </div>
                        <div class="form-group col-md-8">
                            <p class="mb-1">
                                <h:outputText styleClass="mr-2 mb-1" value="#{labels['dict.fechaBaja']}:" />
                            </p>
                             <p:inputText value="#{dialogUnidadAdministrativa.data.fechaBaja}"  disabled="true"  styleClass="w95" >
                                <f:convertDateTime pattern="dd/MM/yyyy HH:mm" />
                            </p:inputText>
                        </div>
                        <div class="form-group col-md-4">
                            <p class="mb-1">
                                <p:outputLabel value=" " />
                            </p>
                        </div>
                        <div class="form-group col-md-8">
                            <p class="mb-1">
                                <h:outputText styleClass="mr-2 mb-1" value="#{labels['dict.normativaBaja']}:" />
                            </p>
                            <p:inputText id="txtNormativaBajaNoasociada" value="#{labels['dialogUnidadAdministrativa.bajaSinNormativa']}"
                                         styleClass="w95" disabled="true" rendered="#{empty dialogUnidadAdministrativa.normativaBaja}"/>
                            <p:inputText id="txtNormativaBaja" value="#{dialogUnidadAdministrativa.normativaBaja.titulo.getTraduccion(dialogUnidadAdministrativa.idioma)}"
                                         styleClass="w85" disabled="true" rendered="#{!empty dialogUnidadAdministrativa.normativaBaja}"/>
                            <p:commandButton id="btnConsultarNormativa" title="#{labels['dict.consultar']}" icon="pi pi-eye"
                                             action="#{dialogUnidadAdministrativa.consultarNormativaBaja()}" styleClass="ml-1"
                                             rendered="#{!empty dialogUnidadAdministrativa.normativaBaja}"
                                             process="@this"  update="messagesDialog" />
                        </div>
                    </div>
                </p:panel>
                <p:panel header="#{labels['dialogUnidadAdministrativa.datos']}" id="formDatos">
                    <div class="form-row">
                        <div class="form-group col-md-3">
                            <p class="mb-1">
                                <h:outputText styleClass="mr-2 mb-1" value="#{labels['dict.codigo']}:" for="txtCodigo"/>
                            </p>
                            <p:inputText id="txtCodigo" value="#{dialogUnidadAdministrativa.data.codigo}"
                                         styleClass="w95" disabled="true"/>
                        </div>
                        <div class="form-group col-md-2">
                            <p:outputLabel value="#{labels['dialogUnidadAdministrativa.version']}:" for="txtVersion"
                                           styleClass="mb-1 pt-0"/>
                            <p:inputText id="txtVersion" type="number" value="#{dialogUnidadAdministrativa.data.version}"
                                         styleClass="w95"
                                         required="#{empty param['formDialog:closeButton']}"
                                         requiredMessage="#{labels['dict.obligatorio.version']}"
                                         disabled="#{dialogUnidadAdministrativa.isModoConsulta()}"
                                         decimalPlaces="0"/>
                        </div>
                        <div class="form-group col-md-2">
                            <p:outputLabel value="#{labels['dialogUnidadAdministrativa.orden']}:" for="txtOrden"
                                           styleClass="mb-1 pt-0"/>
                            <p:inputText id="txtOrden" type="number" value="#{dialogUnidadAdministrativa.data.orden}"
                                         styleClass="w95"
                                         required="#{empty param['formDialog:closeButton']}"
                                         requiredMessage="#{labels['dict.obligatorio.orden']}"
                                         disabled="#{dialogUnidadAdministrativa.isModoConsulta()}"
                                         decimalPlaces="0"/>
                        </div>
                        <div class="form-group col-md-4">
                            <p:outputLabel value="#{labels['dict.identificador']}:" for="txtIdentificador"
                                           styleClass="mb-1 pt-0"/>
                            <p:inputText id="txtIdentificador" value="#{dialogUnidadAdministrativa.data.identificador}"
                                         required="#{empty param['formDialog:closeButton']}"
                                         requiredMessage="#{labels['dict.obligatorio.identificador']}"
                                         styleClass="w95"
                                         disabled="#{dialogUnidadAdministrativa.isModoConsulta()}"/>
                        </div>
                    </div>
                    <div class="form-row">
                        <div class="form-group col-md-12">
                            <p:outputLabel styleClass="mr-2 mb-1 pt-0" value="#{labels['dict.nombre']}:"
                                           for="txtNombre"/>
                            <p>
                                <my:literalComponent id="txtNombre"
                                                     literal="#{dialogUnidadAdministrativa.data.nombre}"
                                                     disabled="#{dialogUnidadAdministrativa.isModoConsulta()}"
                                                     soloLecture="#{dialogUnidadAdministrativa.isModoConsulta()}"
                                                     required="#{empty param['formDialog:closeButton']}"
                                                     idiomasObligatorios="#{sessionBean.getIdiomasObligatorios()}"
                                                     idiomasPermitidos="#{sessionBean.getIdiomasPermitidos()}"
                                                     idioma="#{dialogUnidadAdministrativa.idioma}"
                                                     nombreLiteral="#{labels['dict.nombre']}">
                                    <f:validator validatorId="es.caib.rolsac2.back.validators.ValidadorLiteral"/>
                                </my:literalComponent>
                            </p>

                        </div>
                    </div>
                    <div class="form-row">
                        <div class="form-group col-md-3">
                            <p:outputLabel styleClass="mb-1 pt-0"
                                           value="#{labels['dialogUnidadAdministrativa.codigo.dir3']}:"
                                           for="txtCodigoDIR3"/>
                            <p:inputText id="txtCodigoDIR3" value="#{dialogUnidadAdministrativa.data.codigoDIR3}"
                                         styleClass="w95" disabled="#{dialogUnidadAdministrativa.isModoConsulta()}"
                                         required="#{empty param['formDialog:closeButton']}"/>
                        </div>
                        <div class="form-group col-md-5">
                            <p class="mb-1">
                                <h:outputText styleClass="mr-2 mb-1"
                                              value="#{labels['dialogUnidadAdministrativa.abreviatura']}:"
                                              for="txtAbreviatura"/>
                            </p>
                            <my:literalComponent id="txtAbreviatura"
                                                 literal="#{dialogUnidadAdministrativa.data.abreviatura}"
                                                 disabled="#{dialogUnidadAdministrativa.isModoConsulta()}"
                                                 soloLecture="#{dialogUnidadAdministrativa.isModoConsulta()}"
                                                 required="#{empty param['formDialog:closeButton']}"
                                                 idiomasObligatorios="#{sessionBean.getIdiomasObligatorios()}"
                                                 idiomasPermitidos="#{sessionBean.getIdiomasPermitidos()}"
                                                 idioma="#{dialogUnidadAdministrativa.idioma}"
                                                 nombreLiteral="#{labels['dialogUnidadAdministrativa.abreviatura']}">
                            </my:literalComponent>
                        </div>
                        <div class="form-group col-md-3">
                            <p class="mb-1">
                                <h:outputText value="#{labels['dialogUnidadAdministrativa.tipo']}:" for="txtTipo"/>
                            </p>
                            <p:selectOneMenu id="txtTipo" value="#{dialogUnidadAdministrativa.data.tipo}"
                                             styleClass="w95" autoWidth="false"
                                             disabled="#{dialogUnidadAdministrativa.isModoConsulta()}"
                                             converter="#{tipoUnidadAdministrativaConverter}">
                                <f:selectItem itemLabel="#{labels['dialogUnidadAdministrativa.selecciona.tipo']}"
                                              itemValue="#{null}"/>
                                <f:selectItems value="#{dialogUnidadAdministrativa.tipos}" var="tipo"
                                               itemLabel="#{tipo.descripcion.getTraduccion(dialogUnidadAdministrativa.idioma)}"
                                               itemValue="#{tipo}"/>
                                <p:ajax event="change" update="@this"></p:ajax>
                            </p:selectOneMenu>
                        </div>
                    </div>
                    <div class="form-row" style="height:auto;">
                        <div class="form-group col-md-12">
                            <p class="mb-1">
                                <h:outputText styleClass="mb-1" value="#{labels['dialogUnidadAdministrativa.url']}:"
                                              for="txtUrl"/>
                            </p>
                            <p>
                                <my:literalComponent id="txtUrl"
                                                     literal="#{dialogUnidadAdministrativa.data.url}"
                                                     idioma="#{dialogUnidadAdministrativa.idioma}"

                                                     idiomasObligatorios="#{sessionBean.getIdiomasObligatorios()}"
                                                     idiomasPermitidos="#{sessionBean.getIdiomasPermitidos()}"
                                                     nombreLiteral="#{labels['dialogUnidadAdministrativa.url']}"
                                                     disabled="#{dialogUnidadAdministrativa.isModoConsulta()}"/>
                            </p>

                        </div>

                    </div>
                    <div class="form-row" style="height:auto;">
                        <div class="form-group col-md-12">
                            <p class="mb-1">
                                <h:outputText styleClass="mr-2 mb-1"
                                              value="#{labels['dialogUnidadAdministrativa.presentacion']}:"
                                              for="txtPresentacion"/>
                            </p>
                            <p>
                                <my:literalComponent id="txtPresentacion"
                                                     literal="#{dialogUnidadAdministrativa.data.presentacion}"
                                                     disabled="#{dialogUnidadAdministrativa.isModoConsulta()}"
                                                     idioma="#{dialogUnidadAdministrativa.idioma}"

                                                     idiomasObligatorios="#{sessionBean.getIdiomasObligatorios()}"
                                                     idiomasPermitidos="#{sessionBean.getIdiomasPermitidos()}"
                                                     tipo="html"
                                                     height="100px"
                                                     width="600px"
                                                     toolbar="true"
                                                     idCompuesto="formDialog\:txtPresentacion"
                                                     nombreLiteral="#{labels['dialogUnidadAdministrativa.presentacion']}"/>
                            </p>

                        </div>
                    </div>
                </p:panel>
                <p:panel id="panel-ro" header="#{labels['dialogUnidadAdministrativa.rel.organica']}">
                    <div class="form-row">
                        <div class="form-group col-md-12">
                            <p class="mb-1">
                                <h:outputText styleClass="mb-1" value="#{labels['dialogUnidadAdministrativa.padre']}:"
                                              for="txtPadre"/>
                            </p>
                            <p>
                                <my:unidadAdministrativaComponent id="txtPadre"
                                                                  value="#{dialogUnidadAdministrativa.data.padre}"
                                                                  idioma="#{dialogUnidadAdministrativa.idioma}"
                                                                  ocultarTexto="false" esCabecera="false"
                                                                  soloLecture="#{dialogUnidadAdministrativa.isModoEdicion() || dialogUnidadAdministrativa.isModoConsulta()}"
                                />
                            </p>

                        </div>
                    </div>

                </p:panel>
                <p:panel id="formResponsable" header="#{labels['dialogUnidadAdministrativa.responsable']}">
                    <div class="form-row">
                        <div class="form-group col-md-8">
                            <p class="mb-1">
                                <h:outputText value="#{labels['dialogUnidadAdministrativa.responsableNombre']}:"
                                              for="txtResponsableNombre"/>
                            </p>
                            <p:inputText id="txtResponsableNombre"
                                         value="#{dialogUnidadAdministrativa.data.responsableNombre}"
                                         styleClass="w95"
                                         disabled="#{dialogUnidadAdministrativa.isModoConsulta()}"/>
                        </div>
                        <div class="form-group col-md-4">
                            <p:outputLabel styleClass=" mb-1 pt-0"
                                           value="#{labels['dialogUnidadAdministrativa.tipoSexo']}:"
                                           for="txtTipoSexo"/>
                            <p:selectOneMenu id="txtTipoSexo"
                                             value="#{dialogUnidadAdministrativa.data.responsableSexo}"
                                             styleClass="w95" autoWidth="false" required="#{empty param['formDialog:closeButton']}"
                                             requiredMessage="#{labels['dict.obligatorio.responsableSexo']}"
                                             disabled="#{dialogUnidadAdministrativa.isModoConsulta()}"
                                             converter="#{tipoSexoConverter}">
                                <f:selectItem
                                        itemLabel="#{labels['dialogUnidadAdministrativa.seleccionado.tipoSexo']}"
                                        itemValue="#{null}"/>
                                <f:selectItems value="#{dialogUnidadAdministrativa.tiposSexo}" var="responsableSexo"
                                               itemLabel="#{responsableSexo.descripcion.getTraduccion(dialogUnidadAdministrativa.idioma)}"
                                               itemValue="#{responsableSexo}"/>
                                <p:ajax event="change" update="@this"></p:ajax>
                            </p:selectOneMenu>
                        </div>
                    </div>
                    <div class="form-row" style="height:auto;">
                        <div class="form-group col-md-4">
                            <p class="mb-1">
                                <h:outputText value="#{labels['dialogUnidadAdministrativa.responsableEmail']}:"
                                              for="txtResponsableEmail"/>
                            </p>
                            <p:inputText id="txtResponsableEmail"
                                         value="#{dialogUnidadAdministrativa.data.responsableEmail}"
                                         styleClass="w95"
                                         disabled="#{dialogUnidadAdministrativa.isModoConsulta()}"/>
                        </div>

                    </div>
                    <div class="form-row" style="height:auto;">
                        <div class="form-group col-md-11">
                            <p class="mb-1">
                                <h:outputText value="#{labels['dialogUnidadAdminsitrativa.responsableCV']}:"
                                              for="txtResponsable"/>
                            </p>
                            <p>
                                <my:literalComponent id="txtResponsable"
                                                     literal="#{dialogUnidadAdministrativa.data.responsable}"
                                                     idioma="#{dialogUnidadAdministrativa.idioma}"

                                                     idiomasObligatorios="#{sessionBean.getIdiomasObligatorios()}"
                                                     idiomasPermitidos="#{sessionBean.getIdiomasPermitidos()}"
                                                     tipo="html"
                                                     height="100px"
                                                     width="700px"
                                                     idCompuesto="formDialog\:txtResponsable"
                                                     nombreLiteral="#{labels['dialogUnidadAdminsitrativa.responsableCV']}"/>
                            </p>
                        </div>
                    </div>
                </p:panel>

                <p:panel id="formContacto" header="#{labels['dialogUnidadAdministrativa.contacto']}">
                    <div class="form-row">
                        <div class="form-group col-md-2">
                            <p class="mb-1">
                                <h:outputText value="#{labels['dialogUnidadAdministrativa.telefono']}:"
                                              for="txtTelefono"/>
                            </p>
                            <p:inputText id="txtTelefono" value="#{dialogUnidadAdministrativa.data.telefono}"
                                         styleClass="w95"
                                         disabled="#{dialogUnidadAdministrativa.isModoConsulta()}"/>
                        </div>
                        <div class="form-group col-md-2">
                            <p class="mb-1">
                                <h:outputText value="#{labels['dialogUnidadAdministrativa.fax']}:" for="txtFax"/>
                            </p>
                            <p:inputText id="txtFax" value="#{dialogUnidadAdministrativa.data.fax}" styleClass="w95"
                                         disabled="#{dialogUnidadAdministrativa.isModoConsulta()}"
                            />
                        </div>
                        <div class="form-group col-md-4">
                            <p class="mb-1">
                                <h:outputText value="#{labels['dialogUnidadAdministrativa.email']}:" for="txtEmail"/>
                            </p>
                            <p:inputText id="txtEmail" value="#{dialogUnidadAdministrativa.data.email}"
                                         styleClass="w95"
                                         disabled="#{dialogUnidadAdministrativa.isModoConsulta()}"/>
                        </div>
                        <div class="form-group col-md-4">
                            <p class="mb-1">
                                <h:outputText value="#{labels['dialogUnidadAdministrativa.dominio']}:"
                                              for="txtDominio"/>
                            </p>
                            <p:inputText id="txtDominio" value="#{dialogUnidadAdministrativa.data.dominio}"
                                         styleClass="w95"
                                         disabled="#{dialogUnidadAdministrativa.isModoConsulta()}"/>
                        </div>
                    </div>
                </p:panel>

            </div>
            <div class="ui-g-12 ui-md-3 pr-1">
                <div class="row left-container mx-0">
                    <div class="left-container-header ml-0 col-12 row">
                        <div class="col-10 text-center">
                            <p class="left-container-tit mt-2 mb-1">#{labels['dialogUnidadAdministrativa.usuarios']}</p>
                        </div>
                        <div class="col-2">
                            <p:commandButton id="btnUsuariosCol" onclick="colapsarModulo('#divUsuarios','btnUsuarios');" title="#{labels['dict.colapsar']}" icon="pi pi-minus"  styleClass="mt-2" style="margin-left:-10px;margin-bottom: 10px;" />
                            <p:commandButton id="btnUsuariosExp" onclick="expandirModulo('#divUsuarios','btnUsuarios');" title="#{labels['dict.expandir']}" icon="pi pi-plus"  styleClass="mt-2 importantOcultar" style="margin-left:-10px;margin-bottom: 10px;" />
                        </div>
                    </div>
                    <div id="divUsuarios" class="col-10 p-1">
                        <p:dataTable id="dataTableUsuarios" var="td"
                                     value="#{dialogUnidadAdministrativa.data.usuariosUnidadAdministrativa}"
                                     emptyMessage="#{labels['dict.tablaVacia']}" scrollable="true"
                                     paginator="false" selectionMode="single"
                                     selection="#{dialogUnidadAdministrativa.usuarioSeleccionado}"
                                     rowKey="#{td.codigo}" styleClass="noHeader">

                            <!-- Necesario para actualizar en controlador la fila seleccionada -->
                            <p:ajax event="rowSelect" global="false"/>
                            <p:ajax event="rowUnselect"/>


                            <p:column headerText="#{labels['msg.tablaVacia']}" styleClass="text-center w75">
                                <h:outputText value="#{td.identificador} - #{td.nombre}"/>
                            </p:column>

                        </p:dataTable>
                    </div>
                    <div id="divUsuariosBtns" class="col-2 p-1 d-flex flex-column align-content-center align-items-center">
                        <p:commandButton title="#{labels['dict.nuevo']}" icon="pi pi-plus" styleClass="text-success"
                                         process="@this"
                                         actionListener="#{dialogUnidadAdministrativa.anyadirUsuarios()}"
                                         rendered="#{!dialogUnidadAdministrativa.isModoConsulta()}">
                            <p:ajax event="dialogReturn" process="@this"
                                    update="messagesDialog dataTableUsuarios"/>
                        </p:commandButton>
                        <p:commandButton title="#{labels['dict.eliminar']}" icon="pi pi-minus" styleClass="text-danger"
                                         action="#{dialogUnidadAdministrativa.borrarUsuario()}"
                                         process="@this" update="dataTableUsuarios messagesDialog"
                                         rendered="#{!dialogUnidadAdministrativa.isModoConsulta()}"/>
                        <p:commandButton title="#{labels['dict.consultar']}" icon="pi pi-eye"
                                         action="#{dialogUnidadAdministrativa.consultarUsuario()}"
                                         process="@this" update="dataTableUsuarios messagesDialog"/>
                    </div>
                </div>


                <h:panelGroup id="panelTemas">
                    <c:forEach items="#{dialogUnidadAdministrativa.roots}" var="tema" varStatus="status">
                        <div class="row left-container mx-0 mt-2">
                            <div class="left-container-header ml-0 col-12 row">
                                <div class="col-10 text-center">
                                    <p class="left-container-tit mt-2 mb-1">#{labels['dialogUnidadAdministrativa.temas']} -
                                        #{tema.data.descripcion.getTraduccion(dialogUnidadAdministrativa.idioma)}</p>
                                </div>
                                <div class="col-2">
                                    <p:commandButton id="btnTema#{tema.data.codigo}Col" onclick="colapsarModulo('#divTema#{tema.data.codigo}','btnTema#{tema.data.codigo}');" title="#{labels['dict.colapsar']}" icon="pi pi-minus"  styleClass="mt-2" style="margin-left:-10px"  />
                                    <p:commandButton id="btnTema#{tema.data.codigo}Exp" onclick="expandirModulo('#divTema#{tema.data.codigo}','btnTema#{tema.data.codigo}');" title="#{labels['dict.expandir']}" icon="pi pi-plus"  styleClass="mt-2 importantOcultar" style="margin-left:-10px"  />
                                </div>
                            </div>
                            <div id="divTema#{tema.data.codigo}" class="col-10 p-1">
                                <p:treeTable
                                        value="#{tema}"
                                        var="td"
                                        emptyMessage="#{labels['dict.tablaVacia']}" scrollable="true"
                                        paginator="false" selectionMode="single"
                                        selection="#{dialogUnidadAdministrativa.temasTabla[status.index]}"
                                        rowKey="#{td.codigo}"
                                        styleClass="noHeader">

                                    <!-- Necesario para actualizar en controlador la fila seleccionada -->
                                    <p:ajax event="select" global="false"/>
                                    <!--<p:ajax event="rowUnselect"/>-->


                                    <p:column headerText="" styleClass="w75">

                                        <div class="ui-chkbox ui-widget ui-selection">
                                            <div class="ui-chkbox-box ui-widget ui-corner-all ui-state-default">
                                                <h:outputText
                                                        styleClass="ui-chkbox-icon ui-icon ui-c #{td.relacionado ? 'ui-icon-minus' : 'ui-icon-check'}"></h:outputText>
                                            </div>
                                        </div>
                                        <h:outputText
                                                value="#{td.descripcion.getTraduccion(dialogUnidadAdministrativa.idioma)}"/>
                                    </p:column>

                                </p:treeTable>
                            </div>
                            <div id="divTema#{tema.data.codigo}Btns" class="col-2 p-1 d-flex flex-column align-content-center align-items-center">
                                <p:commandButton title="#{labels['dict.nuevo']}" icon="pi pi-plus"
                                                 styleClass="text-success"
                                                 process="@this"
                                                 actionListener="#{dialogUnidadAdministrativa.altaTematicas(tema.data)}"
                                                 rendered="#{!dialogUnidadAdministrativa.isModoConsulta()}">
                                    <p:ajax event="dialogReturn"
                                            listener="#{dialogUnidadAdministrativa.returnDialogTemas}" process="@this"
                                            update="messagesDialog panelTemas"/>
                                </p:commandButton>
                                <p:commandButton title="#{labels['dict.consultar']}" icon="pi pi-eye"
                                                 action="#{dialogUnidadAdministrativa.consultarTema(status.index)}"
                                                 process="@this" update="panelTemas messagesDialog"/>
                            </div>
                        </div>
                    </c:forEach>

                </h:panelGroup>

                <c:if test="#{dialogUnidadAdministrativa.mostrarProcsNormativas}">
                    <div class="row left-container mx-0 mt-3">
                        <div class="left-container-header ml-0 col-12 row">
                            <div class="col-10 text-center">
                                <p class="left-container-tit mt-2 mb-1">#{labels['dialogUnidadAdministrativa.procedimientos']}</p>
                            </div>
                            <div class="col-2">
                                <p:commandButton id="btnProcsCol" onclick="colapsarModulo('#divProcs','btnProcs');" title="#{labels['dict.colapsar']}" icon="pi pi-minus"  styleClass="mt-2" style="margin-left:-10px;margin-bottom: 10px;" />
                                <p:commandButton id="btnProcsExp" onclick="expandirModulo('#divProcs','btnProcs');" title="#{labels['dict.expandir']}" icon="pi pi-plus"  styleClass="mt-2 importantOcultar" style="margin-left:-10px;margin-bottom: 10px;" />
                            </div>
                        </div>
                        <div id="divProcs" class="col-10 p-1">
                            <p:dataTable id="dataTableProcedimientos" var="td"
                                         value="#{dialogUnidadAdministrativa.procedimientos}"
                                         emptyMessage="#{labels['dict.tablaVacia']}" scrollable="true"
                                         paginator="false" selectionMode="single"
                                         selection="#{dialogUnidadAdministrativa.procedimientoSeleccionado}"
                                         rowKey="#{td.codigo}" styleClass="noHeader">

                                <!-- Necesario para actualizar en controlador la fila seleccionada -->
                                <p:ajax event="rowSelect" global="false"/>
                                <p:ajax event="rowUnselect"/>


                                <p:column headerText="#{labels['msg.tablaVacia']}" styleClass="text-center w75">
                                    <!--<h:outputText value="#{td.codigo} - #{labels['TypeProcedimientoEstado.' += td.estado]}"/>-->
                                    <h:outputText value="#{labels['TypeProcedimientoEstado.' += td.estado]} - #{td.nombreProcedimientoWorkFlow.getTraduccion(sessionBean.lang)} "/>
                                </p:column>

                            </p:dataTable>
                        </div>
                        <div id="divProcsBtns" class="col-2 p-1 d-flex flex-column align-content-center align-items-center">
                            <p:commandButton title="#{labels['dict.consultar']}" icon="pi pi-eye"
                                             action="#{dialogUnidadAdministrativa.consultarProcedimiento(index)}"
                                             process="@this" update="messagesDialog"/>
                        </div>
                    </div>
                </c:if>

                <c:if test="#{dialogUnidadAdministrativa.mostrarProcsNormativas}">
                    <div class="row left-container mx-0 mt-3">
                        <div class="left-container-header ml-0 col-12 row">
                            <div class="col-10 text-center">
                                <p class="left-container-tit mt-2 mb-1">#{labels['dialogUnidadAdministrativa.normativas']}</p>
                            </div>
                            <div class="col-2">
                                <p:commandButton id="btnNormsCol" onclick="colapsarModulo('#divNorms','btnNorms');" title="#{labels['dict.colapsar']}" icon="pi pi-minus"  styleClass="mt-2" style="margin-left:-10px;margin-bottom: 10px;" />
                                <p:commandButton id="btnNormsExp" onclick="expandirModulo('#divNorms','btnNorms');" title="#{labels['dict.expandir']}" icon="pi pi-plus"  styleClass="mt-2 importantOcultar" style="margin-left:-10px;margin-bottom: 10px;" />
                            </div>
                        </div>
                        <div id="divNorms" class="col-10 p-1">
                            <p:dataTable id="dataTableNormativas" var="td"
                                         value="#{dialogUnidadAdministrativa.normativas}"
                                         emptyMessage="#{labels['dict.tablaVacia']}" scrollable="true"
                                         paginator="false" selectionMode="single"
                                         selection="#{dialogUnidadAdministrativa.normativaSeleccionado}"
                                         rowKey="#{td.codigo}" styleClass="noHeader">

                                <!-- Necesario para actualizar en controlador la fila seleccionada -->
                                <p:ajax event="rowSelect" global="false"/>
                                <p:ajax event="rowUnselect"/>


                                <p:column headerText="#{labels['msg.tablaVacia']}" styleClass="text-center w75">
                                    <h:outputText value="#{td.codigo} - #{td.titulo.getTraduccion(sessionBean.lang)}"/>
                                </p:column>

                            </p:dataTable>
                        </div>
                        <div id="divNormsBtns" class="col-2 p-1 d-flex flex-column align-content-center align-items-center">
                            <p:commandButton title="#{labels['dict.consultar']}" icon="pi pi-eye"
                                             action="#{dialogUnidadAdministrativa.consultarNormativa(status.index)}"
                                             process="@this" update="messagesDialog"/>
                        </div>
                    </div>
                </c:if>

                <h:outputScript>
                    function rcEditarPropiedad() {
                        document.getElementById("dialogPlugin:btnEditarPropiedad").click();
                    }

                    function rcBorrarPropiedad() {
                        document.getElementById("dialogPlugin:btnEliminarPropiedad").click();
                    }

                    function colapsarModulo(lateral, botones) {
                        $(lateral).addClass('importantOcultar');
                        $(lateral+"Btns").addClass('importantOcultar');
                        $("#formDialog\\:"+botones+"Exp").removeClass('importantOcultar');
                        $("#formDialog\\:"+botones+"Col").addClass('importantOcultar');
                    }

                    function expandirModulo(lateral, botones) {
                        $(lateral).removeClass('importantOcultar');
                        $(lateral+"Btns").removeClass('importantOcultar');
                        $("#formDialog\\:"+botones+"Exp").addClass('importantOcultar');
                        $("#formDialog\\:"+botones+"Col").removeClass('importantOcultar');
                    }
                </h:outputScript>
            </div>
        </div>


    </ui:define>
    <ui:define name="contentFooterDialogLeft">
        <div class="d-flex flex-column flex-sm-row align-items-center mb-2 mb-sm-0" style="gap: 5px;">

            <p:commandButton value="#{labels['dict.auditorias']}"
                             icon="pi pi-inbox"
                             action="#{dialogUnidadAdministrativa.verAuditorias}"
                             styleClass="btn-footer"
                             disabled="#{empty dialogUnidadAdministrativa.data.codigo}"
            />
        </div>

    </ui:define>
    <ui:define name="contentFooterDialogRight">
        <p:commandButton action="#{dialogUnidadAdministrativa.ayuda}"
                         icon="pi pi-info-circle" iconPos="top"
                         value="#{labels['dict.ayuda']}"
                         process="@this"/>
        <p:commandButton action="#{dialogUnidadAdministrativa.guardar}"
                         value="#{labels['dict.guardar']}"
                         update="messagesDialog formDatos panel-ro formResponsable formContacto "
                         rendered="#{!dialogUnidadAdministrativa.isModoConsulta()}"
                         process="@all"/>
        <p:commandButton action="#{dialogUnidadAdministrativa.cerrar}" id="closeButton"
                         value="#{labels['dict.cerrar']}" update="messagesDialog"
                         process="@all" oncomplete="stopCargando()" onstart="startCargando()"/>
        <p:confirmDialog showEffect="fade" hideEffect="fade" header="#{labels['dict.cerrar.cambiosSinGuardar.titulo']}"
                         update="messagesDialog form" responsive="true" width="458px"
                         message="#{labels['dict.cerrar.cambiosSinGuardar.mensaje']}" widgetVar="confirmCerrar">
            <p:commandButton value="Sí" process="@this" action="#{dialogUnidadAdministrativa.cerrarDefinitivo}"
                             oncomplete="PF('confirmCerrar').hide();"/>
            <p:commandButton value="No" onclick="PF('confirmCerrar').hide();"/>
        </p:confirmDialog>

    </ui:define>
</ui:composition>
</html>