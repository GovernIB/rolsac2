<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
      xmlns:h="http://xmlns.jcp.org/jsf/html"
      xmlns:p="http://primefaces.org/ui"
      xmlns:f="http://xmlns.jcp.org/jsf/core"
      xmlns:c="http://xmlns.jcp.org/jsp/jstl/core">
<ui:composition>
    <!-- Logo i nom aplicació -->
    <div class="collapse navbar-collapse" id="navbarCollapse">
        <ul class="navbar-nav mobil">
            <c:if test="#{sessionBean.getPerfil() != TypePerfiles.SUPER_ADMINISTRADOR}">
                <li class="nav-item dropdown colorRojo">
                    <a class="nav-link dropdown mobil" title="Entidades" href="#" id="entidades"
                       data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                                        <span class="oi oi-caret-bottom float-right flechaSubmenu" title=""
                                              aria-hidden="true"></span>
                        <span class="mb-0 float-right botoCurt">#{sessionBean.entidad.descripcion.getTraduccion(sessionBean.getLang())}</span>
                        <span class="oi oi-globe" title="#{labels['idioma_link']}" aria-hidden="true"></span>
                    </a>
                    <div class="dropdown-menu dropdown-menu-right marg0 minW0" aria-labelledby="entidades">
                        <p:repeat value="#{sessionBean.entidades}" var="entidad">
                            <p:commandLink styleClass="dropdown-item mobil" hreflang="#{entidad}"
                                           action="#{sessionBean.reload()}"
                                           value="#{entidad.descripcion.getTraduccion(sessionBean.getLang())}">
                                <p:ajax listener="#{sessionBean.actualizarEntidad(entidad)}" />
                            </p:commandLink>
                        </p:repeat>
                    </div>
                </li>
            </c:if>
            <li class="nav-item dropdown colorRojo">
                <a class="nav-link dropdown mobil" title="Unidades" href="#" id="perfiles"
                   data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                                    <span class="oi oi-caret-bottom float-right flechaSubmenu" title=""
                                          aria-hidden="true"></span>
                    <span class="mb-0 float-right botoCurt">#{labels['TypePerfiles.' += sessionBean.perfil.toString()]}</span>
                    <span class="oi oi-people" title="#{labels['idioma_link']}" aria-hidden="true"></span>
                </a>
                <div class="dropdown-menu dropdown-menu-right marg0 minW0" aria-labelledby="perfiles">
                    <p:repeat value="#{sessionBean.perfiles}" var="perfil">
                        <p:commandLink styleClass="dropdown-item mobil" hreflang="#{perfil}"
                                       action="#{sessionBean.reloadPerfil()}"
                                       value="#{labels['TypePerfiles.' += perfil.toString()]}"
                        >
                            <p:ajax update=":imgLogo" listener="#{sessionBean.setPerfil(perfil)}" />
                        </p:commandLink>
                    </p:repeat>
                </div>
            </li>
            <li class="nav-item dropdown colorRojo">
                <a class="nav-link dropdown mobil" title="#{labels['idioma_link']}" href="#" id="idiomas"
                   data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                                    <span class="oi oi-caret-bottom float-right flechaSubmenu" title=""
                                          aria-hidden="true"></span>
                    <span class="mb-0 float-right botoCurt">#{labels['dict.configuracion']}</span>
                    <span class="oi oi-cog" title="#{labels['dict.configuracion']}" aria-hidden="true"></span>
                </a>
                <div class="dropdown-menu dropdown-menu-right marg0 minW0" aria-labelledby="idiomas">
                    <p:link styleClass="dropdown-item mobil" outcome="/configuracio"
                            title="#{labels['dict.configuracion']}">
                        <span class="mb-0 float-right botoCurt">#{labels['dict.configuracion']}</span>
                    </p:link>
                    <p:repeat value="#{applicationLocales.available}" var="locale">
                        <h:commandLink styleClass="dropdown-item mobil" hreflang="#{locale.toLanguageTag()}"
                                       action="#{sessionBean.reload()}"
                                       title="#{labels['dict.' += locale.toLanguageTag()]}"
                                       rendered="#{sessionBean.lang != locale.toLanguageTag()}"
                                       update="@form" execute="@form" render="@form"
                                       >
                            <span class="mb-0 float-right botoCurt">#{labels['dict.' += locale.toLanguageTag()]}</span>
                            <f:ajax listener="#{sessionBean.setCurrent(locale)}" update="@form" execute="@form" render="@form"  />
                        </h:commandLink>
                    </p:repeat>
                    <p:commandLink action="#{logout.logout}"
                                   ajax="false" immediate="true" styleClass="dropdown-item mobil"
                                   title="#{labels['dict.salir']}">
                        <span class="mb-0 float-right botoCurt">#{labels['dict.salir']}</span>
                    </p:commandLink>
                </div>
            </li>
        </ul>

    </div>
    <!-- FI Logo i nom aplicació -->
</ui:composition>
</html>